Index: app/src/main/java/org/ehsan/travelexpertsoosd/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.ehsan.travelexpertsoosd;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\n\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.VolleyLog;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.StringRequest;\r\nimport com.android.volley.toolbox.Volley;\r\n\r\nimport java.util.concurrent.Executors;\r\n\r\nimport java.net.URL;\r\nimport java.net.URLConnection;\r\nimport java.util.ArrayList;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\nimport Model.CreditCard;\r\nimport Model.Customer;\r\n\r\nimport static org.ehsan.travelexpertsoosd.Validator.isValidEmailNoAlert;\r\nimport static org.ehsan.travelexpertsoosd.Validator.isValidPassword;\r\n\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    SharedPreferences pref;\r\n    Intent intent, registerIntent;\r\n    View view;\r\n    EditText txt_email, txt_password;\r\n    ImageView img_login;\r\n    Button btn_submit, btn_linkregister;\r\n    TextView lbl_email, lbl_password;\r\n    RequestQueue requestQueue;\r\n    String email;\r\n    String password;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        pref = getSharedPreferences(\"user_details\", MODE_PRIVATE);\r\n        intent = new Intent(LoginActivity.this, PackageSelectActivity.class);\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        requestQueue = Volley.newRequestQueue(this);\r\n\r\n        img_login = findViewById(R.id.img_login);\r\n        txt_email = findViewById(R.id.txt_email);\r\n        txt_password = findViewById(R.id.txt_password);\r\n        btn_submit = findViewById(R.id.btn_submit);\r\n        btn_linkregister = findViewById(R.id.btn_linkregister);\r\n        lbl_email = findViewById(R.id.lbl_email);\r\n        lbl_password = findViewById(R.id.lbl_password);\r\n        img_login.setImageResource(R.drawable.expertlogo);\r\n\r\n        btn_submit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                email = txt_email.getText().toString();\r\n                password = txt_password.getText().toString();\r\n\r\n                //\r\n                if (email.isEmpty()) { //checks if email is empty\r\n                    lbl_email.setText(\"Email * required field *\");\r\n                    lbl_email.setTextColor(Color.RED);\r\n                } else if (!isValidEmailNoAlert(email)) { //checks if email is valid\r\n                    lbl_email.setText(\"Email * invalid email *\");\r\n                    lbl_email.setTextColor(Color.RED);\r\n                } else {\r\n                    if (password.isEmpty()) { //checks if password is empty\r\n                        lbl_password.setText(\"Password *required field *\");\r\n                        lbl_password.setTextColor(Color.RED);\r\n                    } else if (!isValidPassword(password)) { //checks if password is valid\r\n                        lbl_password.setText(\"Password * invalid password *\");\r\n                        lbl_password.setTextColor(Color.RED);\r\n                    } else {\r\n                        //else, email and password are valid\r\n                        Executors.newSingleThreadExecutor().execute(new getCustomer(email));\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        btn_linkregister.setOnClickListener(new View.OnClickListener(){\r\n            @Override\r\n            public void onClick(View v){\r\n                registerIntent = new Intent(LoginActivity.this, RegisterActivity.class);\r\n                startActivity(registerIntent);\r\n            }\r\n        });\r\n    }\r\n\r\n    class getCustomer implements Runnable{\r\n        private String validEmail;\r\n\r\n        public getCustomer(String validEmail) {\r\n            this.validEmail = validEmail;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            //retrieve JSON data from REST service into StringBuffer\r\n            StringBuffer buffer = new StringBuffer();\r\n            //String url = \"http:/192.168.0.17:8081/JSPDay4RESTJPAExample/rs/agent/getagent/\" + packageId;\r\n            //String url = \"http://192.168.133.1:8080/TravelExpertsOOSDJSP/rs/packagesalberta/LoginEmail/\" + validEmail;\r\n            String url = \"http://192.168.0.12:8081/OOSDTravelExperts/rs/agent/LoginEmail/\" + validEmail; //For Ehsans Testing\r\n            Log.d(\"crystal\", \"Auth: \" + url);\r\n            StringRequest stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener<String>() {\r\n                @Override\r\n                public void onResponse(String response) {\r\n                    VolleyLog.wtf(response, \"utf-8\");\r\n                    //convert JSON data from response string into an Agent\r\n                    //create a json array to recieve the response- loop through it to make it into an object\r\n\r\n                    String emailfromUrl = \"\";\r\n                    String passwordfromUrl = \"\";\r\n                    int idfromUrl = 0;\r\n\r\n                    JSONObject pkg = null;\r\n                    JSONArray customerResponse = null;\r\n                    try {\r\n                        customerResponse = new JSONArray(response);\r\n                        if(customerResponse.isNull(0)){\r\n\r\n                        } else {\r\n                            pkg = customerResponse.getJSONObject(0);\r\n                            idfromUrl = pkg.getInt(\"CustomerId\");\r\n                            emailfromUrl = pkg.getString(\"custEmail\");\r\n                            passwordfromUrl = pkg.getString(\"Password\");\r\n                        }\r\n                    } catch (JSONException e){\r\n                        e.printStackTrace();\r\n                    }\r\n                    //update ListView with the adapter of Agents\r\n//                    final JSONObject finalPkg = pkg;\r\n                        final String customerEmail = emailfromUrl;\r\n                        final String customerPassword = passwordfromUrl;\r\n                        final int customerid = idfromUrl;\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                                String intstring = String.valueOf(customerid);\r\n                                Log.d(\"crystalidtest\", intstring);\r\n                                Log.d(\"crystalemailtest\" , customerEmail);\r\n                                Log.d(\"crystalpasswordtest\" , customerPassword);\r\n\r\n                                if(email.equals(customerEmail)  && password.equals(customerPassword)){\r\n                                    SharedPreferences.Editor editor = pref.edit();\r\n                                    editor.putInt(\"id\", customerid);\r\n                                    editor.commit();\r\n                                    startActivity(intent);\r\n                                    //redirect\r\n\r\n                                    Log.d(\"successlogin\", \"login successfull\");\r\n                                } else {\r\n                                    //failure case - some sort of message\r\n                                    lbl_password.setText(\"Password * invalid password *\");\r\n                                    lbl_password.setTextColor(Color.RED);\r\n\r\n                                    lbl_email.setText(\"Email * invalid email *\");\r\n                                    lbl_email.setTextColor(Color.RED);\r\n                                }\r\n                        }\r\n                    });\r\n                }\r\n            }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n                    VolleyLog.wtf(error.getMessage(), \"utf-8\");\r\n                }\r\n            });\r\n\r\n            requestQueue.add(stringRequest);\r\n        }\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/org/ehsan/travelexpertsoosd/LoginActivity.java	(revision 4451304c2e8cb00a4b70204190f3152796f0ba43)
+++ app/src/main/java/org/ehsan/travelexpertsoosd/LoginActivity.java	(date 1603999451252)
@@ -58,7 +58,7 @@
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         pref = getSharedPreferences("user_details", MODE_PRIVATE);
-        intent = new Intent(LoginActivity.this, PackageSelectActivity.class);
+        intent = new Intent(LoginActivity.this, ProfileMainActivity.class);
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_login);
 
@@ -123,8 +123,8 @@
             //retrieve JSON data from REST service into StringBuffer
             StringBuffer buffer = new StringBuffer();
             //String url = "http:/192.168.0.17:8081/JSPDay4RESTJPAExample/rs/agent/getagent/" + packageId;
-            //String url = "http://192.168.133.1:8080/TravelExpertsOOSDJSP/rs/packagesalberta/LoginEmail/" + validEmail;
-            String url = "http://192.168.0.12:8081/OOSDTravelExperts/rs/agent/LoginEmail/" + validEmail; //For Ehsans Testing
+            String url = "http://192.168.133.1:8080/TravelExpertsOOSDJSP/rs/packagesalberta/LoginEmail/" + validEmail;  //crystals testing
+            //String url = "http://192.168.0.12:8081/OOSDTravelExperts/rs/agent/LoginEmail/" + validEmail; //For Ehsans Testing
             Log.d("crystal", "Auth: " + url);
             StringRequest stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener<String>() {
                 @Override
